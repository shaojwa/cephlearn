1.  代码就是数据加上流程，写代码和检查代码也要从这两个角度出发展开，数据上有没有维护好，流程上有没有遍历全。
2.  所谓的数据有没有维护好，意思是，要非常清楚，每份数据在那些场景下需要更新和维护。
3.  所谓的流程有没有遍历全，意思是，任何场景有没有处理好，正常异常，同步异步，是否都有合理的处理。
4.  每一行代码都有最合理的位置，不要随便只是为了完成功能，要找到最好的地方写合适的代码。
5.  日志非常重要，日志是问题定位的探针，要用最少的日志，覆盖最全的信息，日志要比代码更加精炼。
 
## 命名
1. 变量命名可以不用考虑带上类型，比如`interval_set cached_intervals;`没什么必要，所有字段全部表意就好，比如`cached_segs`;

## 功能
1. 功能简单分两点，一要独立，而要完备。独立就是简明，完备就是充分。
1. 状态机要简明，状态尽可能少，表达尽可能清楚，比如用位域。
1. 函数返回值简明，数量尽可能少，如果可能就用void。
1. 代码层次简明，避免深嵌套。
1. 在变量真正需要使用时再定义，不要让定义和使用离太远，这样其初值更有意义。
1. 1有大量代码直接使用0表示成功，建议用RETURN_OK，但是个人觉得用0也很清楚。
1. 参考null object设计模式。
1. 类型要完备，能const就const。
1. 非原来生类型多用引用，同时注意对象的生命周期。
1. 异常流程加充分的日志。
1. 测试用例要同步更上测试。
1. 调用有返回值的函数，需要处理返回值，确定不需要处理的，加上(void)，以明确自己的意图。

## 性能
1. 频繁调用接口多用内联。
1. 避免写空的析构函数。
1. 可能的话，尽量使用task的栈变量，而不是堆变量，以减少内存分配和释放。
1. 尽量使用侵入式容器，以减少内存分配和释放。
1. 使用引用或指针传参以减少拷贝（原生类型变量不需要这样）。
