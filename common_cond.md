#### 条件变量使用

条件变量，顾名思义就是，等某个条件满足之后线程才执行某部分代码。为什么要等，为了多线程之间的同步。当一个线程等一个条件时，有2种选择。

    （1）一直等到条件满足，条件不满足，线程就挂起。就是pthread_cond_wait。
    （2）线程等一定的时间，等不到就继续走。就是pthread_cond_timedwait。
    
 一个线程怎么通知另外一个等待的线程呢？也有2种选择：
  
     （1）pthread_cond_signal()
      (2) pthread_cond_broadcast()
      
#### 为啥要有互斥量
 
一般理解下，多个线程可以等一个cond，如果一个线程等到了，该线程执行后续的代码即可，没等到的线程继续等，或者执行其他流程。为什么非要有互斥量？

《unix环境高级编程》上的说明是，【检查条件变量是否满足，如果不满足时把调用线程放到等待条件的线程列表上】这个操作需要原子性，这两个操作都在持有mutex的时候进行，而pthread_cond_signal()得调用也会在持有mutex之后进行，所以这就把两个操作串行化。

而 posix man 上的说明是：这个函数会把（1）释放锁以（2）线程阻塞在条件变量上原子化。也就是说如果一个线程a已经释放mutex并且即将要阻塞时，此时如果另外一个线程b可以获取mutex，那么线程b后续通过pthread_cond_signal()以及pthread_cond_broadcast()来通知条件改变时，是一定在a进入休眠之后进行。


此时接口没有返回。当接口成功返回时，这个调用线程将再次持有这个互斥锁。

#### 注意点

（1）一个条件变量对应一个而唯一的mutex，一个cond 对应多个 mutex的行为是不确定的。
