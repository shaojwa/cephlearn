#### 条件变量使用

条件变量，顾名思义就是，等某个条件满足之后线程才执行某部分代码。为什么要等，为了多线程之间的同步。当一个线程等一个条件时，有2种选择。

    （1）一直等到条件满足，条件不满足，线程就挂起。就是pthread_cond_wait。
    （2）线程等一定的时间，等不到就继续走。就是pthread_cond_timedwait。
    
  增么激活呢？等待的线程呢？也有2种选择：
  
     （1）pthread_cond_signal()
      (2) pthread_cond_broadcast()
      
#### 为啥要和互斥量
 
一般理解县下，多个线程可以等一个cond，如果一个线程等到了，该线程执行后续的代码即可，没等到的线程继续等，或者执行其他流程。为什么非要有互斥量？
这是因为，【检查条件变量是否满足，如果不满足时，把调用线程放到等待条件的线程列表上，然后释放锁】这个操作需要互斥得进行。
也就是说，这样操作以后，就不会在这个时间段内错过其他线程去改变cond的状态，因为其他线程需要获取mutex之后才能听过signal去改变条件变量的状态。

刚才说到，pthread_cond_wait()调用的时候，会释放mutex并且阻塞在这个条件变量上，这两个步骤是原子的。
原子什么意思？如果一个线程t1已经释放mutex并且即将要阻塞时，此时如果另外一个线程t2可以获取mutex，
那么线程t2后续的pthread_cond_signal()以及pthread_cond_broadcast()时来改变条件状态是，是一定在t1进入休眠之后进行，这样t1就不会错过这个信号。

此时接口没有返回。当接口成功返回时，这个调用线程将再次持有这个互斥锁。

#### 注意点

（1）一个条件变量对应一个而唯一的mutex，一个cond 对应多个 mutex的行为是不确定的。


    
 



