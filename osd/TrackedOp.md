#### 什么是 TrackedOp
为了跟踪集群里面的性能问题，Ceph 设计了一个机制，叫 TrackedOp。我们认为每个请求都有它的生命周期。如果集群出现问题的话，可能会导致请求有很长时间的延迟。这就是我们常说"hang"。最极端的情况就是一个请求永远得不到相应。这里所说的请求包罗万象，从客户端发来的 IO 请求，到 ceph 命令行发到 monitor 的查询，甚至刚才提到的"小报告"都是所谓的 TrackedOp。每个对自己服务质量有要求的 daemnon 都有个注册表叫做 OpTracker。每收到一个 TrackedOp 请求，都会把它记录在案。在 OpTracker 的析构函数里面，则会把自己从注册表里面注销掉。所以这个表里面保存着当前所有的 TrackedOp 的引用，如果一个 TrackedOp 收到之后很快就销毁了，那么就认为这个 op 的处理是及时的。但是如果有请求躺在注册表里很长时间，都没有把自己注销，那么很可能它就"hang"住了。处理这个请求的服务在定期汇报健康状况的时候，会把这个问题也一起报告给 monitor。monitor 会进一步汇总，把这类问题一起报告给管理员。这种问题叫做 SLOW_OPS。
