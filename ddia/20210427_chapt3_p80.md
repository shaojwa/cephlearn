## 哈希表的局限性
1. 必须全部放入内存
2. 当哈希表变满时，继续增长代价昂贵。
3. 哈希冲突时，需要复杂的处理逻辑
4. 区间查询效率不高，不能简单地支持扫描key0000到key9999区间内的所有减查询，只能采用逐个查找的方式查询每一个键。

## SSTables
排序子串表，要求key-value对的顺序按键排序。这个合并算法和合并排序有点类似。SSTable相比哈希索引的日志段，有一下有优点
1. 合并段更加简单高效，及时文件大于可用内存都可以。
2. 文件查找特定的键时，不需要再内存中保存所有的键的所索引，键的索引可以是稀疏的。

## 如何实现SSTables
#### 如果让数据按键排序，毕竟写入的时候是乱序的。
在磁盘上行维护排序结构还是在内存中呢？ 在内存中排序，内存排序有很多广为人知的树状数据结构，内存中维护平衡树结构（这个结构通常也叫做内存表）
引入日志，用来在故障时从日志恢复出内存表。这个方案也是LevelDB和RocksDB所使用的的算法。其实SSTable和内存表就是Google的Bigtable论文引入的术语。

## 从SSTable到LSM-Tree
## 性能优化
总是有很多细节值得升入优化，这样才能使得存储殷勤在实际中表现得更好。
1. 比如使用布隆过滤器来预先排除掉那些不存在的key。
2. 大小分级和分层压缩。

## B-Tree
日志结构索引正在逐渐受到更多认可，但是它还不是最常见的索引类型，最广泛使用的索引结构是B-Tree。
